<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sacred Texts Repository</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    @keyframes slideIn {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(249, 115, 22, 0); }
      50% { box-shadow: 0 0 15px 5px rgba(249, 115, 22, 0.5); }
    }
    .animate-slideIn {
      animation: slideIn 0.3s ease-out;
    }
    .animate-fadeIn {
      animation: fadeIn 0.5s ease-out;
    }
    .animate-glow {
      animation: glow 1s ease-in-out;
    }
    body {
      background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-attachment: fixed;
      font-family: 'Inter', sans-serif;
    }
    .content-container {
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }
    .sidebar {
      background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
    }
    .devanagari {
      font-family: 'Noto Serif Devanagari', serif;
      line-height: 2.2;
      word-break: break-word;
      overflow-wrap: anywhere;
    }
    .verse-text {
      word-break: break-word;
      overflow-wrap: anywhere;
      white-space: pre-wrap;
    }
    .error-boundary {
      color: #e53e3e;
      padding: 2rem;
      text-align: center;
      background: #fff5f5;
      border-radius: 0.5rem;
    }
    .button-primary {
      transition: all 0.3s ease;
      background: linear-gradient(90deg, #f97316, #fb923c);
    }
    .button-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
    }
    .button-danger {
      transition: all 0.3s ease;
      background: linear-gradient(90deg, #ef4444, #f87171);
    }
    .button-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
    }
    .input-field {
      transition: all 0.3s ease;
      border: 1px solid #d1d5db;
    }
    .input-field:focus {
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }
    .sidebar-open {
      overflow: hidden;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
  <script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
      return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
      if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
        try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          var filteredData = jsonData.filter(row => row.some(filledCell));
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          if (headerRowIndex === -1 || headerRowIndex > 25) {
            headerRowIndex = 0;
          }
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
        } catch (e) {
          console.error(e);
          return "";
        }
      }
      return gk_fileData[filename] || "";
    }
  </script>
  <div id="root"></div>
  <script type="text/babel" data-presets="react">
    const { useState, useEffect } = React;
    const supabaseUrl = 'https://wijoubxgelaocoqiuhoc.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indpam91YnhnZWxhb2NvcWl1aG9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYwNDYyMTksImV4cCI6MjA2MTYyMjIxOX0.xjyip4PFXgHFnJodFSSpzSw5vNMWxYS8wi1C5wDNd18';
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
    const initialData = {
      Hinduism: {
        books: {
          Vedas: [
            {
              sloka: "ॐ भूर् भुवः स्वः\nतत् सवितुर्वरेण्यं",
              verseNumber: "1",
              translations: { English: "Om, Earth, Sky, Heaven...", Other: "" },
              hben: "HBEN1",
              image: "",
            },
          ],
          Puranas: [],
          Itihasas: [],
          Upanishads: [],
        },
      },
      Christianity: {
        books: {
          Genesis: [
            {
              verse: "In the beginning...",
              verseNumber: "1:1",
              translations: { English: "In the beginning...", Other: "" },
              cben: "CBEN1",
              image: "",
            },
          ],
          Mark: [],
        },
      },
      Islam: {
        books: {
          Quran: [
            {
              arabicVerse: "بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ",
              verseNumber: "1:1",
              translations: { English: "In the name of Allah...", Other: "" },
              iben: "IBEN1",
              image: "",
            },
          ],
        },
      },
      Scientific: { books: { Hinduism: [] } },
      Unscientific: { books: { Hinduism: [] } },
    };

    class ErrorBoundary extends React.Component {
      state = { hasError: false, error: null };
      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }
      render() {
        if (this.state.hasError) {
          return (
            <div className="error-boundary">
              <h1>Something went wrong.</h1>
              <p>{this.state.error?.message || "Unknown error"}</p>
            </div>
          );
        }
        return this.props.children;
      }
    }

    const App = () => {
      const [isDarkMode, setIsDarkMode] = useState(false);
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [showLogin, setShowLogin] = useState(false);
      const [username, setUsername] = useState("");
      const [password, setPassword] = useState("");
      const [data, setData] = useState(initialData);
      const [newCategory, setNewCategory] = useState("");
      const [newBook, setNewBook] = useState("");
      const [newVerse, setNewVerse] = useState("");
      const [newTranslation, setNewTranslation] = useState({ English: "", Other: "" });
      const [newImage, setNewImage] = useState(null);
      const [comments, setComments] = useState([]);
      const [bugs, setBugs] = useState([]);
      const [searchQuery, setSearchQuery] = useState("");
      const [sidebarOpen, setSidebarOpen] = useState(false);
      const [commentInput, setCommentInput] = useState("");
      const [bugInput, setBugInput] = useState("");
      const [textColor, setTextColor] = useState("black");
      const [telegramLink, setTelegramLink] = useState(() => {
        return localStorage.getItem("telegramLink") || "https://t.me/religious_texts";
      });
      const [newTelegramLink, setNewTelegramLink] = useState("");
      const [searchTriggered, setSearchTriggered] = useState(false);

      useEffect(() => {
        try {
          const savedData = localStorage.getItem("religiousData");
          if (savedData) {
            const parsedData = JSON.parse(savedData);
            if (parsedData && typeof parsedData === "object") {
              setData(parsedData);
            } else {
              console.warn("Invalid localStorage data, using initialData");
              setData(initialData);
            }
          }
        } catch (error) {
          console.error("Error parsing localStorage data:", error);
          setData(initialData);
        }
      }, []);

      useEffect(() => {
        try {
          localStorage.setItem("religiousData", JSON.stringify(data));
        } catch (error) {
          console.error("Error saving to localStorage:", error);
        }
      }, [data]);

      useEffect(() => {
        try {
          localStorage.setItem("telegramLink", telegramLink);
        } catch (error) {
          console.error("Error saving telegramLink to localStorage:", error);
        }
      }, [telegramLink]);

      useEffect(() => {
        if (sidebarOpen) {
          document.body.classList.add('sidebar-open');
        } else {
          document.body.classList.remove('sidebar-open');
        }
      }, [sidebarOpen]);

      useEffect(() => {
        if (searchQuery) {
          setSearchTriggered(true);
          const timer = setTimeout(() => setSearchTriggered(false), 1000);
          return () => clearTimeout(timer);
        }
      }, [searchQuery]);

      const handleLogin = () => {
        if (typeof sha256 === "undefined") {
          alert("SHA-256 library not loaded. Please check your internet connection.");
          return;
        }
        const hashedUsername = sha256(username);
        const hashedPassword = sha256(password);
        const validUsernameHash = "9d254244c1c50bd7c4778807f57a103b520380fc8f0727a3dcfef50624083453";
        const validPasswordHash = "d96a2ba3ce81d979fff750cd2a632dc7b1d8a3313a597c82e3956bf23adb7e82";

        if (hashedUsername === validUsernameHash && hashedPassword === validPasswordHash) {
          setIsLoggedIn(true);
          setShowLogin(false);
          setUsername("");
          setPassword("");
        } else {
          alert("Invalid credentials");
        }
      };

      const addCategory = () => {
        if (newCategory.trim()) {
          setData((prev) => ({
            ...prev,
            [newCategory.trim()]: { books: {} },
          }));
          setNewCategory("");
        }
      };

      const addBook = (category) => {
        debugger;
        insertBook(newBook,category)
        if (newBook.trim() && data[category]) {
          setData((prev) => ({
            ...prev,
            [category]: {
              ...prev[category],
              books: { ...prev[category].books, [newBook.trim()]: [] },
            },
          }));
          setNewBook("");
        }
      };

      const addContent = (category, book) => {
        if (newVerse.trim() && book && data[category]?.books?.[book]) {
          const imageUrl = newImage ? URL.createObjectURL(newImage) : "";
          setData((prev) => ({
            ...prev,
            [category]: {
              ...prev[category],
              books: {
                ...prev[category].books,
                [book]: [
                  ...(prev[category].books[book] || []),
                  {
                    sloka: category === "Hinduism" ? newVerse.trim() : undefined,
                    arabicVerse: category === "Islam" ? newVerse.trim() : undefined,
                    verse: category === "Christianity" ? newVerse.trim() : undefined,
                    verseNumber: `${(prev[category].books[book]?.length || 0) + 1}`,
                    translations: { ...newTranslation },
                    hben: category === "Hinduism" ? `HBEN${Math.floor(10000 + Math.random() * 90000)}` : undefined,
                    cben: category === "Christianity" ? `CBEN${Math.floor(10000 + Math.random() * 90000)}` : undefined,
                    iben: category === "Islam" ? `IBEN${Math.floor(10000 + Math.random() * 90000)}` : undefined,
                    image: imageUrl,
                  },
                ],
              },
            },
          }));
          setNewVerse("");
          setNewTranslation({ English: "", Other: "" });
          setNewImage(null);
        }
      };

      const deleteVerse = (category, book, verseIndex) => {
        if (window.confirm("Are you sure you want to delete this verse?")) {
          setData((prev) => {
            const updatedBooks = { ...prev[category].books };
            updatedBooks[book] = prev[category].books[book].filter(
              (_, index) => index !== verseIndex
            );
            return {
              ...prev,
              [category]: {
                ...prev[category],
                books: updatedBooks,
              },
            };
          });
        }
      };

      const copyText = (text) => {
        if (!text) {
          alert("No text available to copy!");
          return;
        }
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text)
            .then(() => {
              alert("Text copied!");
            })
            .catch((err) => {
              console.error("Copy failed:", err);
              alert("Failed to copy text");
            });
        } else {
          const textArea = document.createElement("textarea");
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand("copy");
            alert("Text copied!");
          } catch (err) {
            console.error("Fallback copy failed:", err);
            alert("Failed to copy text");
          }
          document.body.removeChild(textArea);
        }
      };

      const shareWebsite = () => {
        if (navigator.share) {
          navigator.share({
            title: "Sacred Texts Repository",
            url: window.location.href,
          }).catch((err) => {
            console.error("Share failed:", err);
            alert("Failed to share website");
          });
        } else {
          alert("Share feature not supported in this browser");
        }
      };

      const submitComment = () => {
        if (commentInput.trim()) {
          setComments((prev) => [...prev, commentInput.trim()]);
          setCommentInput("");
        }
      };

      const submitBug = () => {
        if (bugInput.trim()) {
          setBugs((prev) => [...prev, bugInput.trim()]);
          setBugInput("");
        }
      };

      const handleSearch = () => {
        if (!searchQuery.trim()) return data;
        const results = {};
        Object.keys(data || {}).forEach((category) => {
          const books = {};
          Object.keys(data[category]?.books || {}).forEach((book) => {
            if (
              book.toLowerCase().includes(searchQuery.toLowerCase()) ||
              (data[category]?.books[book] || []).some(
                (verse) =>
                  (verse.hben && verse.hben.includes(searchQuery)) ||
                  (verse.cben && verse.cben.includes(searchQuery)) ||
                  (verse.iben && verse.iben.includes(searchQuery))
              )
            ) {
              books[book] = data[category].books[book];
            }
          });
          if (Object.keys(books).length) {
            results[category] = { books };
          }
        });
        return results;
      };

      const handleTextColorChange = (color) => {
        setTextColor(color);
      };

      const getTextColorClass = () => {
        switch (textColor) {
          case "black": return "text-gray-900";
          case "white": return "text-white";
          case "blue": return "text-blue-600";
          case "red": return "text-red-600";
          case "green": return "text-green-600";
          default: return "text-gray-900";
        }
      };

      const handleTelegramLinkUpdate = () => {
        if (newTelegramLink.trim()) {
          if (!newTelegramLink.startsWith("https://t.me/")) {
            alert("Please enter a valid Telegram link starting with https://t.me/");
            return;
          }
          setTelegramLink(newTelegramLink.trim());
          setNewTelegramLink("");
        } else {
          alert("Please enter a Telegram link.");
        }
      };

      const displayedData = handleSearch();
      const textColorClass = getTextColorClass();
      const hasSearchResults = Object.keys(displayedData || {}).length > 0;

      return (
        <ErrorBoundary>
          <div className="flex min-h-screen">
            <div
              className={`sidebar inset-y-0 left-0 w-72 text-white transform ${
                sidebarOpen ? "translate-x-0" : "-translate-x-full"
              } md:translate-x-0 transition-transform duration-300 ease-in-out z-30`}
            >
              <div className="p-6">
                <h2 className="text-2xl font-bold">Sacred Texts</h2>
                <button
                  className="md:hidden mt-4 px-4 py-2 button-danger rounded-lg text-sm font-medium"
                  onClick={() => setSidebarOpen(false)}
                >
                  Close
                </button>
              </div>
              <nav className="px-6 overflow-y-auto max-h-[calc(100vh-120px)]">
                <input
                  type="text"
                  placeholder="Search by book or code..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="input-field w-full px-4 py-2 mb-6 text-gray-900 bg-white rounded-lg focus:outline-none"
                />
                {Object.keys(data || {}).map((category) => (
                  <div key={category} className="mb-4">
                    <h3 className="font-semibold text-lg">{category}</h3>
                    {Object.keys(data[category]?.books || {}).map((book) => (
                      <a
                        key={book}
                        href={`#${category}-${book}`}
                        className="block pl-4 py-1 text-sm hover:bg-gray-700 rounded transition-colors"
                        onClick={() => setSidebarOpen(false)}
                      >
                        {book}
                      </a>
                    ))}
                  </div>
                ))}
                <a
                  href={telegramLink}
                  target="_blank"
                  className="block px-4 py-2 text-sm hover:bg-gray-700 rounded transition-colors"
                >
                  Download PDFs
                </a>
              </nav>
            </div>

            <div className="flex-1 p-6 md:p-8">
              <button
                className="md:hidden px-4 py-2 button-primary rounded-lg text-white font-medium mb-6"
                onClick={() => setSidebarOpen(true)}
              >
                Open Sidebar
              </button>

              <div className="container mx-auto content-container p-8 animate-fadeIn">
                <div className="flex justify-between items-center mb-8">
                  <h1 className={`text-4xl font-bold ${textColorClass}`}>
                    Sacred Texts Repository
                  </h1>
                  <div className="flex space-x-3">
                    <select
                      value={textColor}
                      onChange={(e) => handleTextColorChange(e.target.value)}
                      className="input-field px-4 py-2 bg-white text-gray-900 rounded-lg focus:outline-none"
                    >
                      <option value="black">Black</option>
                      <option value="white">White</option>
                      <option value="blue">Blue</option>
                      <option value="red">Red</option>
                      <option value="green">Green</option>
                    </select>
                    <button
                      onClick={() => setIsDarkMode(!isDarkMode)}
                      className="px-4 py-2 button-primary rounded-lg text-white font-medium"
                    >
                      {isDarkMode ? "Light Mode" : "Dark Mode"}
                    </button>
                    {!isLoggedIn && (
                      <button
                        onClick={() => setShowLogin(true)}
                        className="px-4 py-2 button-primary rounded-lg text-white font-medium"
                      >
                        Admin Login
                      </button>
                    )}
                    {isLoggedIn && (
                      <button
                        onClick={() => setIsLoggedIn(false)}
                        className="px-4 py-2 button-danger rounded-lg text-white font-medium"
                      >
                        Logout
                      </button>
                    )}
                  </div>
                </div>

                {showLogin && !isLoggedIn && (
                  <div className="bg-white p-8 rounded-lg shadow-lg mb-8 animate-fadeIn">
                    <h2 className={`text-2xl font-semibold mb-6 ${textColorClass}`}>
                      Admin Login
                    </h2>
                    <input
                      type="text"
                      placeholder="Username"
                      value={username}
                      onChange={(e) => setUsername(e.target.value)}
                      className="input-field w-full px-4 py-3 mb-4 bg-gray-50 rounded-lg focus:outline-none"
                    />
                    <input
                      type="password"
                      placeholder="Password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      className="input-field w-full px-4 py-3 mb-4 bg-gray-50 rounded-lg focus:outline-none"
                    />
                    <div className="flex space-x-4">
                      <button
                        onClick={handleLogin}
                        className="flex-1 px-4 py-3 button-primary rounded-lg text-white font-medium"
                      >
                        Login
                      </button>
                      <button
                        onClick={() => setShowLogin(false)}
                        className="flex-1 px-4 py-3 button-danger rounded-lg text-white font-medium"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                )}

                {isLoggedIn && (
                  <div className="mt-8 p-6 bg-white rounded-lg shadow-lg animate-fadeIn">
                    <h3 className={`text-xl font-semibold ${textColorClass}`}>
                      Set Telegram Link for Downloads
                    </h3>
                    <input
                      type="text"
                      placeholder="Enter Telegram link (e.g., https://t.me/religious_texts)"
                      value={newTelegramLink}
                      onChange={(e) => setNewTelegramLink(e.target.value)}
                      className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                    />
                    <button
                      onClick={handleTelegramLinkUpdate}
                      className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                    >
                      Save Telegram Link
                    </button>
                    <p className="text-gray-600 mt-4">
                      Current Telegram Link: {telegramLink}
                    </p>
                  </div>
                )}

                <div>
                  <h2 className={`text-3xl font-bold mb-6 ${textColorClass}`}>Contents</h2>
                  {searchQuery && !hasSearchResults && (
                    <p className={`text-lg text-red-600 animate-fadeIn bg-red-50 p-4 rounded-lg`}>
                      No results found for "{searchQuery}".
                    </p>
                  )}
                  {Object.keys(displayedData || {}).map((category) => (
                    <div
                      key={category}
                      className={`mb-8 animate-fadeIn ${searchTriggered && hasSearchResults ? 'animate-glow' : ''}`}
                      id={category}
                    >
                      <h3 className={`text-2xl font-semibold ${textColorClass}`}>
                        {category}
                      </h3>
                      {isLoggedIn && (
                        <div className="mt-4 p-6 bg-white rounded-lg shadow-lg">
                          <h4 className={`text-lg font-semibold ${textColorClass}`}>
                            Add Book to {category}
                          </h4>
                          <input
                            type="text"
                            placeholder="New Book Name"
                            value={newBook}
                            onChange={(e) => setNewBook(e.target.value)}
                            className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                          />
                          <button
                            onClick={() => addBook(category)}
                            className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                          >
                            Add Book
                          </button>
                        </div>
                      )}
                      {Object.keys(displayedData[category]?.books || {}).map((book) => (
                        <div
                          key={book}
                          className={`ml-4 mt-4 ${searchTriggered && hasSearchResults ? 'animate-glow' : ''}`}
                          id={`${category}-${book}`}
                        >
                          <h4 className={`text-xl font-medium ${textColorClass}`}>
                            {book}
                          </h4>
                          {(displayedData[category].books[book] || []).map((verse, index) => (
                            <div
                              key={index}
                              className="ml-4 p-4 border-b border-gray-200"
                            >
                              {category === "Hinduism" && verse.sloka && (
                                <p className={`${textColorClass} devanagari verse-text text-lg`}>
                                  {verse.sloka.split("\n").map((line, i) => (
                                    <span key={i}>
                                      {line}
                                      <br />
                                    </span>
                                  ))}
                                </p>
                              )}
                              {category === "Islam" && verse.arabicVerse && (
                                <p className={`${textColorClass} verse-text text-lg`}>
                                  {verse.arabicVerse}
                                </p>
                              )}
                              {category === "Christianity" && verse.verse && (
                                <p className={`${textColorClass} verse-text text-lg`}>
                                  {verse.verse}
                                </p>
                              )}
                              {verse.image && (
                                <img
                                  src={verse.image}
                                  alt="Verse Image"
                                  className="mt-4 max-w-sm rounded-lg shadow-md"
                                />
                              )}
                              <p className="text-gray-600 text-sm mt-2">
                                Verse: {verse.verseNumber}
                              </p>
                              <p className="text-gray-600 text-sm">
                                {verse.hben || verse.cben || verse.iben || "N/A"}
                              </p>
                              <p className="text-gray-600 text-sm">
                                English: {verse.translations?.English || "N/A"}
                              </p>
                              <p className="text-gray-600 text-sm">
                                Other: {verse.translations?.Other || "N/A"}
                              </p>
                              <div className="flex space-x-3 mt-4">
                                <button
                                  onClick={() =>
                                    copyText(
                                      verse.sloka || verse.arabicVerse || verse.verse || ""
                                    )
                                  }
                                  className="px-3 py-2 button-primary rounded-lg text-white text-sm font-medium"
                                >
                                  Copy Verse
                                </button>
                                <button
                                  onClick={() => copyText(verse.translations?.English || "")}
                                  className="px-3 py-2 button-primary rounded-lg text-white text-sm font-medium"
                                >
                                  Copy English
                                </button>
                                {isLoggedIn && (
                                  <button
                                    onClick={() => deleteVerse(category, book, index)}
                                    className="px-3 py-2 button-danger rounded-lg text-white text-sm font-medium"
                                  >
                                    Delete Verse
                                  </button>
                                )}
                              </div>
                            </div>
                          ))}
                          {isLoggedIn && (
                            <div className="mt-6 p-6 bg-white rounded-lg shadow-lg">
                              <h4 className={`text-lg font-semibold ${textColorClass}`}>
                                Add Content to {book}
                              </h4>
                              <textarea
                                placeholder="Verse/Sloka"
                                value={newVerse}
                                onChange={(e) => setNewVerse(e.target.value)}
                                className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                              ></textarea>
                              <input
                                type="text"
                                placeholder="English Translation"
                                value={newTranslation.English}
                                onChange={(e) =>
                                  setNewTranslation({
                                    ...newTranslation,
                                    English: e.target.value,
                                  })
                                }
                                className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                              />
                              <input
                                type="text"
                                placeholder="Other Translation"
                                value={newTranslation.Other}
                                onChange={(e) =>
                                  setNewTranslation({
                                    ...newTranslation,
                                    Other: e.target.value,
                                  })
                                }
                                className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                              />
                              <input
                                type="file"
                                accept="image/*"
                                onChange={(e) => setNewImage(e.target.files[0])}
                                className="w-full px-4 py-3 mt-4"
                              />
                              <button
                                onClick={() => addContent(category, book)}
                                className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                              >
                                Add Content
                              </button>
                            </div>
                          )}
                        </div>
                      ))}
                    </div>
                  ))}
                  {isLoggedIn && (
                    <div className="mt-8 p-6 bg-white rounded-lg shadow-lg animate-fadeIn">
                      <h3 className={`text-xl font-semibold ${textColorClass}`}>
                        Add New Category
                      </h3>
                      <input
                        type="text"
                        placeholder="New Category (e.g., Buddhism)"
                        value={newCategory}
                        onChange={(e) => setNewCategory(e.target.value)}
                        className="input-field w-full px-4 py-3 mt-4 bg-gray-50 rounded-lg focus:outline-none"
                      />
                      <button
                        onClick={addCategory}
                        className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                      >
                        Add Category
                      </button>
                    </div>
                  )}
                </div>

                <div className="mt-8 animate-fadeIn">
                  <h2 className={`text-3xl font-bold mb-6 ${textColorClass}`}>
                    User Actions
                  </h2>
                  <button
                    onClick={shareWebsite}
                    className="px-4 py-3 button-primary rounded-lg text-white font-medium mr-3"
                  >
                    Share Website
                  </button>
                  <a
                    href={telegramLink}
                    target="_blank"
                    className="px-4 py-3 button-primary rounded-lg text-white font-medium"
                  >
                    Download PDFs (Telegram)
                  </a>
                </div>

                <div className="mt-8 p-6 bg-white rounded-lg shadow-lg animate-fadeIn">
                  <h2 className={`text-2xl font-semibold mb-6 ${textColorClass}`}>
                    Report Bug
                  </h2>
                  <textarea
                    placeholder="Describe the bug..."
                    value={bugInput}
                    onChange={(e) => setBugInput(e.target.value)}
                    className="input-field w-full px-4 py-3 bg-gray-50 rounded-lg focus:outline-none"
                  ></textarea>
                  <button
                    onClick={submitBug}
                    className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                  >
                    Submit Bug
                  </button>
                </div>

                <div className="mt-8 p-6 bg-white rounded-lg shadow-lg animate-fadeIn">
                  <h2 className={`text-2xl font-semibold mb-6 ${textColorClass}`}>
                    Add Comment
                  </h2>
                  <textarea
                    placeholder="Your comment..."
                    value={commentInput}
                    onChange={(e) => setCommentInput(e.target.value)}
                    className="input-field w-full px-4 py-3 bg-gray-50 rounded-lg focus:outline-none"
                  ></textarea>
                  <button
                    onClick={submitComment}
                    className="px-4 py-3 mt-4 button-primary rounded-lg text-white font-medium"
                  >
                    Submit Comment
                  </button>
                </div>
              </div>
            </div>
          </div>
        </ErrorBoundary>
      );
    };

    /* API methods to insert data into the supabase DB */
    const insertBook = async (bookName,categoryName) => {
      debugger;
    const { data, error } = await supabase
      .from('Books')
      .insert([
        { bookname: bookName ,CategoryName:categoryName }
      ]);
      if (error) {
        console.error('Insert error:', error);
      } else {
        console.log('Inserted:', data);
      }
    // console.log('Inserted:', data, 'Error:', error);
  };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>